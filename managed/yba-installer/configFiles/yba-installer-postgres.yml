 services:
  - name: postgresService
    fileName: /etc/systemd/system/postgres.service
    contents: |
      [Unit]
      Description=Postgres
      Wants=network-online.target
      After=network-online.target

      [Service]
      User=postgres
      Group=postgres
      Type=forking
      TimeoutSec=300

      ExecStart={{ installRoot }}/postgres/bin/pg_ctl -D {{ installRoot }}/postgres/data \
      -o "-k {{ installRoot }}/postgres/run/postgresql/" start
      ExecStop={{ installRoot }}/postgres/bin/pg_ctl -D {{ installRoot }}/postgres/data \
      -o "-k {{ installRoot }}/postgres/run/postgresql/" stop

      Restart=always
      RestartSec={{ yamlPath ".postgres.restartSeconds"}}

      [Install]
      WantedBy=multi-user.target
